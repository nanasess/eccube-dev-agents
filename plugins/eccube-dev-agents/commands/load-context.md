# 保存したコンテキストの読み込み

このコマンドは、`/save-context` で保存されたファイルを読み込んで、作業状況を把握します。
コンテキストクリア後の新セッションで作業を継続する際に使用します。

## 手順

1. **ファイルの特定**:
   - `$ARGUMENTS` が指定されている場合:
     - `@` 記法に対応（例: `@current-work.md` → `current-work.md`）
     - ファイル名のみの場合: `.ai-agent/sessions/<ファイル名>` を検索
     - 絶対/相対パスの場合: そのまま使用（後方互換性）
   - `$ARGUMENTS` がない場合:
     - `.ai-agent/sessions/` ディレクトリから `*-[0-9]*.md` パターンで検索
     - 最も新しく更新されたファイルを使用
     - 複数見つかった場合: 最新のファイルを使用し、他のファイルも一覧表示
     - `.ai-agent/sessions/` が存在しない、またはファイルが見つからない場合: カレントディレクトリにフォールバック（後方互換性）
     - それでも見つからない場合: エラーメッセージを表示し、`/save-context` の使用を提案

2. **ファイルの内容を読み込み**:
   - 指定されたファイルを読み込む
   - ファイルが存在しない場合は、わかりやすいエラーメッセージを表示

3. **内容を要約して表示**:
   - **作業の目的・背景**: なぜこの作業を始めたのか
   - **現在の進捗状況**: 前回どこまで進んでいたか
   - **完了済み項目**: これまでに完了した作業
   - **未完了項目と優先度**: 残りの作業と優先順位
   - **発見事項・課題**: 実装中に判明した問題点
   - **技術的決定事項**: 採用した技術やアプローチ
   - **次に取り組むべきタスク**: 作業を再開する際の推奨アクション

4. **作業継続のための推奨アクションを提案**:
   - 次のステップの具体的な提案
   - 必要なファイルやリソースの確認
   - 関連する実装計画ファイル（`*-plan.md`）があれば提案

## 引数

`$ARGUMENTS` (オプション) - ファイル名（`@` 記法にも対応、例: `current-work.md` または `@current-work.md`）

指定がない場合は、`.ai-agent/sessions/` ディレクトリから `*-[0-9]*.md` パターンで検索し、最も新しいコンテキストファイルを自動選択します。

## 使用例

```bash
# ファイル名を指定して読み込み（.ai-agent/sessions/ 内を検索）
/load-context authentication-feature-202510301730.md
# → .ai-agent/sessions/authentication-feature-202510301730.md を読み込み

# @記法で指定
/load-context @authentication-feature-202510301730.md

# ファイル名を省略（自動検索: .ai-agent/sessions/ 内の最新ファイル）
/load-context
```

## 出力例

```
# 作業コンテキスト: ユーザー認証機能の実装

前回の保存: 2025-10-30 15:30:00

## 作業の目的
EC-CUBEプラグインにOAuth2.0ベースのユーザー認証機能を追加

## 前回の進捗状況
- 認証APIエンドポイントの実装完了
- トークン管理機能の実装完了
- テストコードは未着手

## 発見事項
- トークンの有効期限は環境変数で設定可能にした
- リフレッシュトークンのローテーション機能を追加した

## 次のアクション
1. 認証機能のユニットテストを作成
2. 統合テストでエンドツーエンドの動作確認
3. エラーハンドリングの改善

関連する実装計画ファイル: authentication-feature-plan.md
```

## 実際のユースケース

前セッションで `/save-context` により保存されたコンテキストを新セッションで復元し、作業を継続します。

```
1. 前セッションで `/save-context`
   → 自動生成: `.ai-agent/sessions/authentication-feature-202510301730.md`
2. `/clear` でコンテキストクリア
3. 新セッションで `/load-context` ← ここで使用（自動的に最新ファイルを読み込み）
4. 作業継続

または、明示的にファイル名を指定:
1. `/save-context my-work.md`
   → `.ai-agent/sessions/my-work.md` に保存
2. `/clear`
3. `/load-context my-work.md`
   → `.ai-agent/sessions/my-work.md` から読み込み
```

## 注意事項

- ファイルが見つからない場合は、`/save-context` の使用を提案します
- 複数の関連ファイル（実装計画など）がある場合は、それらの読み込みも提案します
- 古いコンテキストファイルの場合は、更新日時を表示して注意を促します
